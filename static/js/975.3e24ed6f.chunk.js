"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[975],{8975:function(e,a,s){s.r(a),s.d(a,{default:function(){return O}});var t=s(2807),i=s(8489),n=s(2791),r="Dialogs_dialogs__WZGRt",l="Dialogs_dialogs_items__PdCZQ",d="Dialogs_messages_items__LNhxo",o="Dialogs_scrollable__3WYir",_="Dialogs_dialog_start__vS7Qx",c="Dialogs_messages_items_area__mlfuw",g="Dialogs_add_message_form__Mf93t",m="DialogItem_dialog_item__Gk5GQ",u="DialogItem_active__wyStN",h="DialogItem_dialog_item_wrap__b0VdO",x="DialogItem_dialog_item_body__vjQyJ",j="DialogItem_subtitle_message__IPApJ",v="DialogItem_user_avatar__GLbZa",p="DialogItem_dialog_title_area__MFfL3",f="DialogItem_dialog_subtitle_area__x5-v9",D="DialogItem_dialog_title__zBBdm",N="DialogItem_dialog_time__7ljwa",y=s(1523),I=s(9271),b=s(4353),w=s(184),M=function(e){var a,s="/dialogs/"+e.id,t=(0,I.$B)("/dialogs/:id");return a=null===t?null:parseInt(t.params.id),(0,w.jsx)("div",{className:e.id===a?m+" ".concat(u):m,children:(0,w.jsx)(y.OL,{to:s,children:(0,w.jsxs)("div",{className:h,children:[(0,w.jsx)("div",{className:v,children:(0,w.jsx)("img",{src:b,alt:"avatar"})}),(0,w.jsxs)("div",{className:x,children:[(0,w.jsxs)("div",{className:p,children:[(0,w.jsx)("div",{className:D,children:(0,w.jsx)("b",{children:e.name})}),(0,w.jsx)("div",{className:N,children:e.time})]}),(0,w.jsx)("div",{className:f,children:(0,w.jsx)("div",{className:j,children:e.message})})]})]})})})},Z="Message_message__9pd4D",F="Message_owner__fyegj",B="Message_message_body__ObxN+",A="Message_message_text__t32oW",G="Message_time__cPS99",k=function(e){var a=e.date,s="".concat(("0"+a.getHours()).slice(-2),":").concat(("0"+a.getMinutes()).slice(-2));return(0,w.jsx)("div",{className:Z+" ".concat(e.owner?F:""),children:(0,w.jsxs)("div",{className:B,children:[(0,w.jsx)("div",{className:A,children:e.message}),(0,w.jsxs)("div",{className:G,children:[(0,w.jsx)("span",{}),(0,w.jsx)("span",{children:s})]})]})})},P=s(6834),S=function(e){var a=e.dialogsPage;a.dialogs.sort((function(e,a){return e.dialog_id-a.dialog_id}));var s=(0,I.$B)("/dialogs/:id"),t=a.dialogs.filter((function(e){return null===s?a.dialogs[0]:e.dialog_id===parseInt(s.params.id)}))[0].chat_history.map((function(e){return(0,w.jsx)(k,{message:e.message_text,owner:e.owner,date:e.message_date},e.message_id)})),n=a.dialogs.map((function(e){var a,s=e.chat_history[e.chat_history.length-1].message_text,t=e.chat_history[e.chat_history.length-1].message_date,i=(new Date).getDate(),n=(new Date).getMonth(),r=(new Date).getFullYear();return i===t.getDate()&&n===t.getMonth()&&r===t.getFullYear()?a=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"numeric",hour12:!1}).format(t):i===t.getDate()&&n===t.getMonth()||r!==t.getFullYear()?r!==t.getFullYear()&&(a=Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)):a=Intl.DateTimeFormat("en-GB",{month:"short",day:"2-digit"}).format(t),(0,w.jsx)(M,{name:e.user_name,id:e.dialog_id,message:s,time:a},e.dialog_id)}));if(!e.isAuth)return(0,w.jsx)(I.l_,{to:"/login"});var m=function(){var a=(0,P.cI)(),t=a.register,n=a.handleSubmit;return(0,w.jsxs)("form",{className:g,onSubmit:n((function(a){a=(0,i.Z)((0,i.Z)({},a),{},{id:parseInt(s.params.id),owner:!0,message_date:new Date}),e.addMessage(a)})),children:[(0,w.jsx)("input",(0,i.Z)((0,i.Z)({},t("newMessageBody",{maxLength:1e3})),{},{placeholder:"Message",autoFocus:!0})),(0,w.jsx)("div",{children:(0,w.jsx)("button",{type:"submit",children:"Send"})})]})};return(0,w.jsxs)("div",{className:r,children:[(0,w.jsx)("div",{className:l,children:n}),(0,w.jsx)("div",{className:d,children:(0,w.jsx)("div",{className:o,children:(0,w.jsxs)(I.rs,{children:[(0,w.jsx)(I.AW,{exact:!0,path:"/dialogs/",render:function(){return(0,w.jsx)("div",{className:_,children:"select chat to start a conversation"})}}),(0,w.jsx)(I.AW,{path:"/dialogs/:id",render:function(){return(0,w.jsxs)("div",{className:c,children:[t,(0,w.jsx)(m,{})]})}})]})})})]})},C=s(4233),L=s(7853),W=s(4531),Y=s(8932),Q=s(2587),$=function(e){return{isAuth:e.auth.isAuth}},O=(0,s(7781).qC)((0,C.$j)((function(e){return{dialogsPage:e.dialogsPage}}),{addMessage:t.H}),(function(e){var a=function(a){(0,Y.Z)(t,a);var s=(0,Q.Z)(t);function t(){return(0,L.Z)(this,t),s.apply(this,arguments)}return(0,W.Z)(t,[{key:"render",value:function(){return this.props.isAuth?(0,w.jsx)(e,(0,i.Z)({},this.props)):(0,w.jsx)(I.l_,{to:"/login"})}}]),t}(n.Component);return(0,C.$j)($)(a)}))(S)},4353:function(e,a,s){e.exports=s.p+"static/media/user.d99c1dde41d54e964be8.png"}}]);
//# sourceMappingURL=975.3e24ed6f.chunk.js.map
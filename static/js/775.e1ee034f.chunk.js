"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[775],{4775:function(e,s,o){o.r(s),o.d(s,{default:function(){return T}});var t=o(8489),r=o(7853),i=o(4531),a=o(8932),n=o(2587),l=o(2791),c="Profile_content__udT8+",u="Profile_blockHeader__GY02w",f=o(3430),d={description:"ProfileInfo_description__64BnQ",imageArea:"ProfileInfo_imageArea__0DlDY",profileDataArea:"ProfileInfo_profileDataArea__r75ta",mainPhoto:"ProfileInfo_mainPhoto__hFt75",upload_image:"ProfileInfo_upload_image__tRZa3",select_photo:"ProfileInfo_select_photo__iP3JS",fullName:"ProfileInfo_fullName__Odyo-",fullNameForm:"ProfileInfo_fullNameForm__UVyYW",status:"ProfileInfo_status__wpLxq",lookingForAJob:"ProfileInfo_lookingForAJob__1Qbp0",lookingForAJobForm:"ProfileInfo_lookingForAJobForm__3NFch",aboutMe:"ProfileInfo_aboutMe__sibGI",aboutMeForm:"ProfileInfo_aboutMeForm__+mEWe",skills:"ProfileInfo_skills__UsXLc",skillsForm:"ProfileInfo_skillsForm__C80QM",contacts:"ProfileInfo_contacts__jJtkI",contactsForm:"ProfileInfo_contactsForm__wrOPV",form_input:"ProfileInfo_form_input__wNofn",form_textarea:"ProfileInfo_form_textarea__hWAoQ",facebook:"ProfileInfo_facebook__8CAjM",website:"ProfileInfo_website__OVHJW",vk:"ProfileInfo_vk__q0vN5",twitter:"ProfileInfo_twitter__BjQSe",instagram:"ProfileInfo_instagram__MWgNi",youtube:"ProfileInfo_youtube__kkbug",github:"ProfileInfo_github__CkNij",mainLink:"ProfileInfo_mainLink__zIKWW",button:"ProfileInfo_button__mARou",error:"ProfileInfo_error__3fng1"},p=o(5739),m=o(184),h=function(e){var s=(0,l.useState)(!1),o=(0,f.Z)(s,2),t=o[0],r=o[1],i=(0,l.useState)(e.status),a=(0,f.Z)(i,2),n=a[0],c=a[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,m.jsxs)("div",{className:d.status,children:[!t&&(0,m.jsx)("span",{onDoubleClick:function(){r(!0)},children:e.status||"-------"}),t&&(0,m.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(n)},value:n})]})},_=o(4353),x=o(6834),j=function(e){var s=e.onSubmit,o=e.profile,r={fullName:o.fullName,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.lookingForAJobDescription,aboutMe:o.aboutMe,contacts:o.contacts},i=(0,x.cI)({defaultValues:r}),a=i.register,n=i.handleSubmit,l=i.formState.errors;return(0,m.jsxs)("form",{onSubmit:n(s),children:[(0,m.jsxs)("div",{className:d.fullNameForm,children:[(0,m.jsx)("b",{children:"Full name"}),(0,m.jsx)("input",(0,t.Z)((0,t.Z)({},a("fullName",{required:!0})),{},{placeholder:"Full name",className:d.form_input})),l.fullName&&(0,m.jsx)("div",{className:d.error,children:"This field is required"})]}),(0,m.jsx)("div",{className:d.lookingForAJobForm,children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",(0,t.Z)((0,t.Z)({},a("lookingForAJob")),{},{type:"checkbox"})),"looking for a job"]})}),(0,m.jsxs)("div",{className:d.skillsForm,children:[(0,m.jsx)("b",{children:"My professional skills"}),":",(0,m.jsx)("textarea",(0,t.Z)((0,t.Z)({},a("lookingForAJobDescription")),{},{placeholder:"My skills",className:d.form_textarea}))]}),(0,m.jsxs)("div",{className:d.aboutMeForm,children:[(0,m.jsx)("b",{children:"About me"}),":",(0,m.jsx)("textarea",(0,t.Z)((0,t.Z)({},a("aboutMe")),{},{placeholder:"About me description",className:d.form_textarea}))]}),(0,m.jsxs)("div",{className:d.contactsForm,children:[(0,m.jsx)("b",{children:"Contacts"}),":",(0,m.jsx)("table",{children:(0,m.jsx)("tbody",{children:Object.keys(o.contacts).map((function(e){return(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{children:[e,":"]}),(0,m.jsx)("td",{children:(0,m.jsx)("input",(0,t.Z)((0,t.Z)({},a("contacts."+e)),{},{placeholder:e,className:d.form_input}))})]},e)}))})})]}),(0,m.jsx)("div",{className:d.button,type:"submit",children:(0,m.jsx)("button",{children:"Save"})})]})},P=function(e){var s=e.profile,o=e.isOwner,t=e.goToEditMode,r=e.status,i=e.updateStatus;return(0,m.jsxs)("div",{className:d.profileData,children:[(0,m.jsx)("div",{className:d.fullName,children:s.fullName}),(0,m.jsx)(h,{status:r,updateStatus:i}),(0,m.jsxs)("div",{className:d.lookingForAJob,children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",s.lookingForAJob?(0,m.jsx)("span",{className:d.yes,children:"yes"}):(0,m.jsx)("span",{className:d.no,children:"no"})]}),(0,m.jsxs)("div",{className:d.aboutMe,children:[(0,m.jsx)("b",{children:"About me"}),": ",s.aboutMe]}),(0,m.jsxs)("div",{className:d.skills,children:[(0,m.jsx)("b",{children:"My professional skills"}),": ",s.lookingForAJobDescription]}),(0,m.jsx)("div",{className:d.contacts,children:Object.keys(s.contacts).map((function(e){return s.contacts[e]?(0,m.jsx)(b,{contactTitle:e,contactValue:s.contacts[e]},e):null}))}),o&&(0,m.jsx)("div",{className:d.button,children:(0,m.jsx)("button",{onClick:t,children:"Edit profile"})})]})},b=function(e){var s=e.contactTitle,o=e.contactValue;return(0,m.jsx)("a",{href:o,children:(0,m.jsx)("span",{className:d[s]})})},g=function(e){var s=e.profile,o=e.status,t=e.updateUserStatus,r=e.isOwner,i=e.savePhoto,a=e.saveProfile,n=(0,l.useState)(!1),c=(0,f.Z)(n,2),u=c[0],h=c[1];if(!s)return(0,m.jsx)(p.Z,{});return(0,m.jsxs)("div",{className:d.description,children:[(0,m.jsxs)("div",{className:d.imageArea,children:[(0,m.jsx)("img",{src:s.photos.large||_,className:d.mainPhoto,alt:"profile avatar"}),r&&u&&(0,m.jsxs)("label",{className:d.upload_image,children:[(0,m.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&i(e.target.files[0])}}),"Upload"]})]}),(0,m.jsx)("div",{className:d.profileDataArea,children:u?(0,m.jsx)(j,{profile:s,onSubmit:function(e){a(e).then((function(){h(!1)}))}}):(0,m.jsx)(P,{goToEditMode:function(){h(!0)},profile:s,isOwner:r,status:o,updateStatus:t})})]})},A=o(6070),v="MyPosts_posts_area__NggvR",k="MyPosts_posts__7++Dn",N="MyPosts_addPost_textarea__dTpKR",I="MyPosts_addPostButton__stgh6",F="Post_item__AOu86",M="Post_message__mGvk5",C=o(6382),S=function(e){return(0,m.jsxs)("div",{className:F,children:[(0,m.jsx)("img",{src:e.profilePhoto,alt:"profile"}),(0,m.jsxs)("div",{className:M,children:[(0,m.jsx)("div",{children:e.message}),(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:C,alt:"like"}),(0,m.jsx)("span",{children:e.likesCount})]})]})]})},y=l.memo((function(e){var s;s=null===e.profile?_:e.profile.photos.large;var o=e.posts.sort((function(e,s){return e.id-s.id})).reverse().map((function(e){return(0,m.jsx)(S,{message:e.message,likesCount:e.likesCount,profilePhoto:s},e.id)})),r=function(){var s=(0,x.cI)(),o=s.register,r=s.handleSubmit;return(0,m.jsxs)("form",{onSubmit:r((function(s){e.addPost(s.addPost)})),children:[(0,m.jsx)("textarea",(0,t.Z)((0,t.Z)({},o("addPost")),{},{placeholder:"Post message",className:N})),(0,m.jsx)("div",{className:I,children:(0,m.jsx)("button",{type:"submit",children:"Add post"})})]})};return(0,m.jsx)("div",{className:v,children:(0,m.jsxs)("div",{children:[(0,m.jsx)(r,{}),(0,m.jsx)("div",{className:k,children:o})]})})})),Z=o(4233),J=(0,Z.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile}}),{addPost:A.q2})(y),U=function(e){return(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("div",{className:u,children:"Profile"}),(0,m.jsx)(g,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,m.jsx)("div",{className:u,children:"My Posts"}),(0,m.jsx)(J,{})]})},w=o(9271),B=o(7781),D=function(e){(0,a.Z)(o,e);var s=(0,n.Z)(o);function o(){return(0,r.Z)(this,o),s.apply(this,arguments)}return(0,i.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.autorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s){this.props.match.params.userId!==e.match.params.userid&&this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(U,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),o}(l.Component),T=(0,B.qC)(w.EN,(0,Z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:A.et,getUserStatus:A.Tq,updateUserStatus:A.OL,savePhoto:A.Ju,saveProfile:A.Ii}))(D)},6382:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAjCAYAAAAXMhMjAAAACXBIWXMAABcRAAAXEQHKJvM/AAABuElEQVRYhc2Y3VnCMBSG33QBdQLxMld2A+sEsoG4gWyAGzCCTCAj1A28oreMUCY4PsEUgTT0n+Z7nt40Ocnb5CT5GiUi+JQpdQtMgQSYHFXbAimw1iK5J3yvTCkTH9s2CuU2PtUiP06QVSmchVoCr06hqxXwfg6ZKTUDFsC9E3Gqb1NPi6SVcJlS5gvXwI3TjF87M8KmA/thJv7JW7tcH1pk4YWzU/BVGlpPc8CM2GPL+JUWmTlwmVKxzYMmIzaE5lpkeQ6XtpiKofSgRbYR/3kWChh2If2NXKaUSeAXp8q4uots90lgYEZxlCk1CWARlCmJznb+oBSFCoaF2zpvA1GxWvMA8+65mNa1UzSuduacLuA+A4Pb84R4fBmHMzEW7Hi1Tm3B2Dp4wwOcfZGMDPimRQ4pdrLPWcs8FuAJGGWb8EiADhhlcFwfsBQMHxzXA/SCcQmO4QEvglHn4B8IsBKMuq6kZ8BaYDSxTD0B1gajqZ/rCNgIjDZmsyVgYzDaOuGGgK3A6GLTawK2BqPrP0QFYCcw+vjB8QB2BtvLmM0+ng3EG8g3MOurzYs3m01l7uaqbjprC/gFe45NtK8IPRIAAAAASUVORK5CYII="},4353:function(e,s,o){e.exports=o.p+"static/media/user.d99c1dde41d54e964be8.png"}}]);
//# sourceMappingURL=775.e1ee034f.chunk.js.map
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[775],{4775:function(e,s,o){o.r(s),o.d(s,{default:function(){return D}});var t=o(8489),i=o(7853),r=o(4531),a=o(8932),n=o(2587),l=o(2791),c="Profile_content__udT8+",u=o(3430),f={description:"ProfileInfo_description__64BnQ",imageArea:"ProfileInfo_imageArea__0DlDY",profileDataArea:"ProfileInfo_profileDataArea__r75ta",mainPhoto:"ProfileInfo_mainPhoto__hFt75",upload_image:"ProfileInfo_upload_image__tRZa3",select_photo:"ProfileInfo_select_photo__iP3JS",fullName:"ProfileInfo_fullName__Odyo-",fullNameForm:"ProfileInfo_fullNameForm__UVyYW",status:"ProfileInfo_status__wpLxq",lookingForAJob:"ProfileInfo_lookingForAJob__1Qbp0",lookingForAJobForm:"ProfileInfo_lookingForAJobForm__3NFch",aboutMe:"ProfileInfo_aboutMe__sibGI",aboutMeForm:"ProfileInfo_aboutMeForm__+mEWe",skills:"ProfileInfo_skills__UsXLc",skillsForm:"ProfileInfo_skillsForm__C80QM",contacts:"ProfileInfo_contacts__jJtkI",contactsForm:"ProfileInfo_contactsForm__wrOPV",tooltip:"ProfileInfo_tooltip__qL2Q-",form_input:"ProfileInfo_form_input__wNofn",form_textarea:"ProfileInfo_form_textarea__hWAoQ",facebook:"ProfileInfo_facebook__8CAjM",website:"ProfileInfo_website__OVHJW",vk:"ProfileInfo_vk__q0vN5",twitter:"ProfileInfo_twitter__BjQSe",instagram:"ProfileInfo_instagram__MWgNi",youtube:"ProfileInfo_youtube__kkbug",github:"ProfileInfo_github__CkNij",mainLink:"ProfileInfo_mainLink__zIKWW",button:"ProfileInfo_button__mARou",error:"ProfileInfo_error__3fng1"},d=o(5739),p=o(184),m=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],i=o[1],r=(0,l.useState)(e.status),a=(0,u.Z)(r,2),n=a[0],c=a[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,p.jsxs)("div",{className:f.status,children:[!t&&(0,p.jsxs)("span",{onDoubleClick:function(){i(!0)},children:[e.status||"-------",(0,p.jsx)("span",{className:f.tooltip,children:"double click to edit"})]}),t&&(0,p.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(n)},value:n})]})},h=o(4353),_=o(6834),x=function(e){var s=e.onSubmit,o=e.profile,i={fullName:o.fullName,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.lookingForAJobDescription,aboutMe:o.aboutMe,contacts:o.contacts},r=(0,_.cI)({defaultValues:i}),a=r.register,n=r.handleSubmit,l=r.formState.errors;return(0,p.jsxs)("form",{onSubmit:n(s),children:[(0,p.jsxs)("div",{className:f.fullNameForm,children:[(0,p.jsx)("b",{children:"Full name:"}),(0,p.jsx)("input",(0,t.Z)((0,t.Z)({},a("fullName",{required:!0})),{},{placeholder:"Full name",className:f.form_input})),l.fullName&&(0,p.jsx)("div",{className:f.error,children:"This field is required"})]}),(0,p.jsx)("div",{className:f.lookingForAJobForm,children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",(0,t.Z)((0,t.Z)({},a("lookingForAJob")),{},{type:"checkbox"})),"looking for a job"]})}),(0,p.jsxs)("div",{className:f.skillsForm,children:[(0,p.jsx)("b",{children:"My professional skills:"}),(0,p.jsx)("textarea",(0,t.Z)((0,t.Z)({},a("lookingForAJobDescription")),{},{placeholder:"My skills",className:f.form_textarea}))]}),(0,p.jsxs)("div",{className:f.aboutMeForm,children:[(0,p.jsx)("b",{children:"About me:"}),(0,p.jsx)("textarea",(0,t.Z)((0,t.Z)({},a("aboutMe")),{},{placeholder:"About me description",className:f.form_textarea}))]}),(0,p.jsxs)("div",{className:f.contactsForm,children:[(0,p.jsx)("b",{children:"Contacts"}),":",(0,p.jsx)("table",{children:(0,p.jsx)("tbody",{children:Object.keys(o.contacts).map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[e,":"]}),(0,p.jsx)("td",{children:(0,p.jsx)("input",(0,t.Z)((0,t.Z)({},a("contacts."+e)),{},{placeholder:e,className:f.form_input}))})]},e)}))})})]}),(0,p.jsx)("div",{className:f.button,type:"submit",children:(0,p.jsx)("button",{children:"Save"})})]})},j=function(e){var s=e.profile,o=e.isOwner,t=e.goToEditMode,i=e.status,r=e.updateStatus;return(0,p.jsxs)("div",{className:f.profileData,children:[(0,p.jsx)("div",{className:f.fullName,children:s.fullName}),(0,p.jsx)(m,{status:i,updateStatus:r}),(0,p.jsxs)("div",{className:f.lookingForAJob,children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",s.lookingForAJob?(0,p.jsx)("span",{className:f.yes,children:"yes"}):(0,p.jsx)("span",{className:f.no,children:"no"})]}),(0,p.jsxs)("div",{className:f.aboutMe,children:[(0,p.jsx)("b",{children:"About me"}),": ",s.aboutMe]}),(0,p.jsxs)("div",{className:f.skills,children:[(0,p.jsx)("b",{children:"My professional skills"}),": ",s.lookingForAJobDescription]}),(0,p.jsx)("div",{className:f.contacts,children:Object.keys(s.contacts).map((function(e){return s.contacts[e]?(0,p.jsx)(P,{contactTitle:e,contactValue:s.contacts[e]},e):null}))}),o&&(0,p.jsx)("div",{className:f.button,children:(0,p.jsx)("button",{onClick:t,children:"Edit profile"})})]})},P=function(e){var s=e.contactTitle,o=e.contactValue;return(0,p.jsx)("a",{href:o,children:(0,p.jsx)("span",{className:f[s]})})},b=function(e){var s=e.profile,o=e.status,t=e.updateUserStatus,i=e.isOwner,r=e.savePhoto,a=e.saveProfile,n=(0,l.useState)(!1),c=(0,u.Z)(n,2),m=c[0],_=c[1];if(!s)return(0,p.jsx)(d.Z,{});return(0,p.jsxs)("div",{className:f.description,children:[(0,p.jsxs)("div",{className:f.imageArea,children:[(0,p.jsx)("img",{src:s.photos.large||h,className:f.mainPhoto,alt:"profile avatar"}),i&&m&&(0,p.jsxs)("label",{className:f.upload_image,children:[(0,p.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&r(e.target.files[0])}}),"Upload"]})]}),(0,p.jsx)("div",{className:f.profileDataArea,children:m?(0,p.jsx)(x,{profile:s,onSubmit:function(e){a(e).then((function(){_(!1)}))}}):(0,p.jsx)(j,{goToEditMode:function(){_(!0)},profile:s,isOwner:i,status:o,updateStatus:t})})]})},g=o(6070),A="MyPosts_posts_area__NggvR",v="MyPosts_posts__7++Dn",k="MyPosts_addPost_textarea__dTpKR",N="MyPosts_addPostButton__stgh6",I="Post_item__AOu86",F="Post_message__mGvk5",M=o(6382),C=function(e){return(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)("img",{src:e.profilePhoto,alt:"profile"}),(0,p.jsxs)("div",{className:F,children:[(0,p.jsx)("div",{children:e.message}),(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:M,alt:"like"}),(0,p.jsx)("span",{children:e.likesCount})]})]})]})},S=l.memo((function(e){var s;s=null===e.profile?h:e.profile.photos.large;var o=e.posts.sort((function(e,s){return e.id-s.id})).reverse().map((function(e){return(0,p.jsx)(C,{message:e.message,likesCount:e.likesCount,profilePhoto:s},e.id)})),i=function(){var s=(0,_.cI)(),o=s.register,i=s.handleSubmit;return(0,p.jsxs)("form",{onSubmit:i((function(s){e.addPost(s.addPost)})),children:[(0,p.jsx)("textarea",(0,t.Z)((0,t.Z)({},o("addPost")),{},{placeholder:"Post message",className:k})),(0,p.jsx)("div",{className:N,children:(0,p.jsx)("button",{type:"submit",children:"Add post"})})]})};return(0,p.jsx)("div",{className:A,children:(0,p.jsxs)("div",{children:[(0,p.jsx)(i,{}),(0,p.jsx)("div",{className:v,children:o})]})})})),y=o(4233),Z=(0,y.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile}}),{addPost:g.q2})(S),J=function(e){return(0,p.jsxs)("div",{className:c,children:[(0,p.jsx)(b,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,p.jsx)(Z,{})]})},U=o(9271),w=o(7781),B=function(e){(0,a.Z)(o,e);var s=(0,n.Z)(o);function o(){return(0,i.Z)(this,o),s.apply(this,arguments)}return(0,r.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.autorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s){this.props.match.params.userId!==e.match.params.userid&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)(J,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),o}(l.Component),D=(0,w.qC)(U.EN,(0,y.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:g.et,getUserStatus:g.Tq,updateUserStatus:g.OL,savePhoto:g.Ju,saveProfile:g.Ii}))(B)},6382:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAjCAYAAAAXMhMjAAAACXBIWXMAABcRAAAXEQHKJvM/AAABuElEQVRYhc2Y3VnCMBSG33QBdQLxMld2A+sEsoG4gWyAGzCCTCAj1A28oreMUCY4PsEUgTT0n+Z7nt40Ocnb5CT5GiUi+JQpdQtMgQSYHFXbAimw1iK5J3yvTCkTH9s2CuU2PtUiP06QVSmchVoCr06hqxXwfg6ZKTUDFsC9E3Gqb1NPi6SVcJlS5gvXwI3TjF87M8KmA/thJv7JW7tcH1pk4YWzU/BVGlpPc8CM2GPL+JUWmTlwmVKxzYMmIzaE5lpkeQ6XtpiKofSgRbYR/3kWChh2If2NXKaUSeAXp8q4uots90lgYEZxlCk1CWARlCmJznb+oBSFCoaF2zpvA1GxWvMA8+65mNa1UzSuduacLuA+A4Pb84R4fBmHMzEW7Hi1Tm3B2Dp4wwOcfZGMDPimRQ4pdrLPWcs8FuAJGGWb8EiADhhlcFwfsBQMHxzXA/SCcQmO4QEvglHn4B8IsBKMuq6kZ8BaYDSxTD0B1gajqZ/rCNgIjDZmsyVgYzDaOuGGgK3A6GLTawK2BqPrP0QFYCcw+vjB8QB2BtvLmM0+ng3EG8g3MOurzYs3m01l7uaqbjprC/gFe45NtK8IPRIAAAAASUVORK5CYII="},4353:function(e,s,o){e.exports=o.p+"static/media/user.d99c1dde41d54e964be8.png"}}]);
//# sourceMappingURL=775.2ab96438.chunk.js.map